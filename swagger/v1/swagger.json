{
  "swagger": "2.0",
  "info": {
    "title": "API V1",
    "version": "v1"
  },
  "paths": {
    "/api/v1/things/{thing_name}/accumulators": {
      "get": {
        "summary": "Retrieves all accumulators from a thing",
        "tags": [
          "Accumulators"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "accumulators founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  },
                  "created_at": {
                    "type": "string"
                  },
                  "updated_at": {
                    "type": "string"
                  },
                  "units_count": {
                    "type": "float"
                  },
                  "final_price": {
                    "type": "float"
                  }
                },
                "required": [
                  "id",
                  "value",
                  "created_at",
                  "updated_at",
                  "units_count",
                  "final_price"
                ]
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "403": {
            "description": "not authorized to access"
          },
          "404": {
            "description": "accumulators not found"
          }
        }
      }
    },
    "/api/v1/accumulators_report": {
      "get": {
        "summary": "Retrieves all accumulators related with all things",
        "tags": [
          "Alarms Report"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "date[start_date]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "date[end_date]",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "accumulators founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "thing_id": {
                    "type": "string"
                  },
                  "thing_name": {
                    "type": "string"
                  },
                  "accumulators": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "date": {
                          "type": "string"
                        },
                        "value": {
                          "type": "string"
                        },
                        "consumption_delta": {
                          "type": "integer"
                        },
                        "accumulated_delta": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "required": [
                  "thing_id",
                  "thing_name",
                  "accumulators"
                ]
              }
            }
          },
          "404": {
            "description": "Results not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                },
                "code": {
                  "type": "integer"
                }
              },
              "required": [
                "errors",
                "code"
              ]
            }
          }
        }
      }
    },
    "/api/v1/accumulators_report/{thing_name}": {
      "get": {
        "summary": "Retrieves all accumulators related with a specific things",
        "tags": [
          "Alarms Report"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "date[start_date]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "date[end_date]",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "accumulators founded",
            "schema": {
              "type": "object",
              "properties": {
                "thing_id": {
                  "type": "string"
                },
                "thing_name": {
                  "type": "string"
                },
                "accumulators": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": {
                        "type": "string"
                      },
                      "value": {
                        "type": "string"
                      },
                      "consumption_delta": {
                        "type": "integer"
                      },
                      "accumulated_delta": {
                        "type": "integer"
                      }
                    }
                  }
                },
                "consumptions_by_month": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "type": "string"
                    },
                    "days_count": {
                      "type": "integer"
                    },
                    "months": {
                      "type": "array"
                    }
                  }
                },
                "required": [
                  "thing_id",
                  "thing_name",
                  "accumulators",
                  "consumptions_by_month"
                ]
              }
            }
          },
          "404": {
            "description": "The thing thing_name does not exist",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                },
                "code": {
                  "type": "integer"
                }
              },
              "required": [
                "errors",
                "code"
              ]
            }
          }
        }
      }
    },
    "/api/v1/accumulators_report/": {
      "get": {
        "summary": "Retrieves last accumulators of a thing",
        "tags": [
          "Things"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "query",
            "type": "string"
          },
          {
            "name": "query",
            "in": "query",
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "last accumulators for thing found",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  },
                  "created_at": {
                    "type": "string"
                  },
                  "updated_at": {
                    "type": "string"
                  }
                },
                "required": [
                  "created_at",
                  "updated_at",
                  "value"
                ]
              }
            }
          },
          "404": {
            "description": "thing not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                }
              },
              "required": [
                "errors"
              ]
            }
          }
        }
      }
    },
    "/api/v1/things/{thing_name}/alarms/{id}": {
      "put": {
        "summary": "Retrieves a viewed alarm",
        "tags": [
          "Alarms"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "id",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "alarms founded",
            "schema": {
              "type": "object",
              "required": [
                "created_at",
                "updated_at",
                "value",
                "viewed_date",
                "viewed",
                "id"
              ],
              "properties": {
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "value": {
                  "type": "string"
                },
                "viewed_date": {
                  "type": "string"
                },
                "viewed": {
                  "type": "boolean"
                },
                "id": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "404": {
            "description": "The alarm does not exist"
          }
        }
      }
    },
    "/api/v1/things/{thing_name}/alarms": {
      "get": {
        "summary": "Retrieves all alarms from a thing",
        "tags": [
          "Alarms"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "alarms founded",
            "schema": {
              "type": "array",
              "required": [
                "created_at",
                "updated_at",
                "value",
                "viewed_date",
                "viewed",
                "id"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "value": {
                  "type": "string"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "viewed": {
                  "type": "boolean"
                },
                "viewed_date": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "403": {
            "description": "not authorized to access"
          },
          "404": {
            "description": "alarms not found"
          }
        }
      }
    },
    "/api/v1/alarms_report": {
      "get": {
        "summary": "Retrieves all alarms related with all things",
        "tags": [
          "Alarms Report"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "date[start_date]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "date[end_date]",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "alarms founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "thing_id": {
                    "type": "string"
                  },
                  "thing_name": {
                    "type": "string"
                  },
                  "alarms": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "date": {
                          "type": "string"
                        },
                        "value": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "required": [
                  "thing_id",
                  "thing_name",
                  "alarms"
                ]
              }
            }
          },
          "404": {
            "description": "Results not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                },
                "code": {
                  "type": "integer"
                }
              },
              "required": [
                "errors",
                "code"
              ]
            }
          }
        }
      }
    },
    "/api/v1/alarms_report/{thing_name}": {
      "get": {
        "summary": "Retrieves all alarms related with a specific things",
        "tags": [
          "Alarms Report"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "date[start_date]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "date[end_date]",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "alarms founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "thing_id": {
                    "type": "string"
                  },
                  "thing_name": {
                    "type": "string"
                  },
                  "alarms": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "date": {
                          "type": "string"
                        },
                        "value": {
                          "type": "string"
                        },
                        "consumption_delta": {
                          "type": "integer"
                        },
                        "accumulated_delta": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "required": [
                  "thing_id",
                  "thing_name",
                  "alarms"
                ]
              }
            }
          },
          "404": {
            "description": "The thing thing_name does not exist",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                },
                "code": {
                  "type": "integer"
                }
              },
              "required": [
                "errors",
                "code"
              ]
            }
          }
        }
      }
    },
    "/api/v1/aqueducts": {
      "get": {
        "summary": "Retrieves all Aqueducts",
        "tags": [
          "Aqueducts"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "type": "string",
            "name": "Authorization",
            "required": true,
            "description": "Client token"
          }
        ],
        "responses": {
          "200": {
            "description": "all aqueducts",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  }
                },
                "required": [
                  "id",
                  "email",
                  "name"
                ]
              }
            }
          }
        }
      }
    },
    "/authentication": {
      "post": {
        "summary": "Retrieves a token",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "type": "string"
          },
          {
            "name": "password",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "user found",
            "schema": {
              "type": "object",
              "properties": {
                "auth_token": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              },
              "required": [
                "auth_token",
                "email"
              ]
            }
          },
          "401": {
            "description": "user not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                }
              },
              "required": [
                "errors"
              ]
            }
          }
        }
      }
    },
    "/api/v1/things/{thing_name}/battery_levels": {
      "get": {
        "summary": "Retrieves all battery levels from a thing",
        "tags": [
          "Battery Levels"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "battery levels founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "value": {
                    "type": "string"
                  },
                  "level_label": {
                    "type": "string"
                  },
                  "digit": {
                    "type": "integer"
                  },
                  "created_at": {
                    "type": "string"
                  },
                  "updated_at": {
                    "type": "string"
                  }
                },
                "required": [
                  "created_at",
                  "updated_at",
                  "value",
                  "level_label",
                  "digit"
                ]
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "403": {
            "description": "not authorized to access"
          },
          "404": {
            "description": "battery levels not found"
          }
        }
      }
    },
    "/api/v1/cities": {
      "get": {
        "summary": "Retrieves all cities related with a specific state",
        "tags": [
          "Cities"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "state_code",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "cities founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "state": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "code_iso": {
                        "type": "string"
                      }
                    }
                  }
                },
                "required": [
                  "name",
                  "state"
                ]
              }
            }
          },
          "404": {
            "description": "state not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                }
              },
              "required": [
                "errors"
              ]
            }
          }
        }
      }
    },
    "/api/v1/countries": {
      "get": {
        "summary": "Retrieves all Countries",
        "tags": [
          "Countries"
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "things founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code_iso": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "code_iso"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/downlinks": {
      "post": {
        "summary": "Generates a downlink",
        "tags": [
          "Downlinks"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "action_type": {
                  "type": "string"
                },
                "payload": {
                  "type": "string"
                },
                "thing_name": {
                  "type": "string"
                }
              },
              "required": [
                "action_type",
                "type",
                "thing_name"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Downlink generated without payload",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "object"
                },
                "message": {
                  "type": "object"
                },
                "thing_name": {
                  "type": "string"
                },
                "action_type": {
                  "type": "string"
                },
                "payload": {
                  "type": "string"
                },
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "payload",
                "thing_name",
                "action_type"
              ]
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/locations": {
      "post": {
        "summary": "create location",
        "tags": [
          "Locations"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "address": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "float"
                    },
                    "longitude": {
                      "type": "float"
                    }
                  }
                },
                "country_state_city": {
                  "type": "object",
                  "properties": {
                    "country": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string"
                    },
                    "city": {
                      "type": "string"
                    }
                  }
                },
                "schedule_billing": {
                  "type": "object",
                  "properties": {
                    "stratum": {
                      "type": "integer"
                    },
                    "basic_charge_price": {
                      "type": "float"
                    },
                    "top_limit": {
                      "type": "float"
                    },
                    "basic_price": {
                      "type": "float"
                    },
                    "extra_price": {
                      "type": "float"
                    },
                    "billing_frequency": {
                      "type": "integer"
                    },
                    "billing_period": {
                      "type": "string"
                    },
                    "cut_day": {
                      "type": "integer"
                    },
                    "start_day": {
                      "type": "integer"
                    },
                    "start_month": {
                      "type": "integer"
                    },
                    "start_year": {
                      "type": "integer"
                    }
                  }
                },
                "schedule_report": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string"
                    },
                    "frequency_day": {
                      "type": "integer"
                    },
                    "frequency_interval": {
                      "type": "string"
                    },
                    "start_day": {
                      "type": "integer"
                    },
                    "start_month": {
                      "type": "integer"
                    },
                    "start_year": {
                      "type": "integer"
                    }
                  }
                }
              },
              "required": [
                "location",
                "country_state_city",
                "schedule_billing",
                "schedule_report"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "location created",
            "schema": {
              "type": "object",
              "required": [
                "name",
                "address",
                "latitude",
                "longitude",
                "city",
                "schedule_billing",
                "schedule_report"
              ],
              "properties": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "latitude": {
                    "type": "float"
                  },
                  "longitude": {
                    "type": "float"
                  },
                  "city": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_billing": {
                    "type": "object",
                    "properties": {
                      "stratum": {
                        "type": "integer"
                      },
                      "basic_charge_price": {
                        "type": "float"
                      },
                      "top_limit": {
                        "type": "float"
                      },
                      "basic_price": {
                        "type": "float"
                      },
                      "extra_price": {
                        "type": "float"
                      },
                      "billing_frequency": {
                        "type": "integer"
                      },
                      "billing_period": {
                        "type": "string"
                      },
                      "cut_day": {
                        "type": "integer"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_report": {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string"
                      },
                      "frequency_day": {
                        "type": "integer"
                      },
                      "frequency_interval": {
                        "type": "string"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "thing not found",
            "schema": {
              "type": "object",
              "required": [
                "errors"
              ],
              "properties": {
                "type": "object",
                "properties": {
                  "errors": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/{thing_name}": {
      "put": {
        "summary": "update location",
        "tags": [
          "Locations"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "new_thing_name": {
                  "type": "string"
                },
                "location": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "address": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "float"
                    },
                    "longitude": {
                      "type": "float"
                    }
                  }
                },
                "country_state_city": {
                  "type": "object",
                  "properties": {
                    "country": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string"
                    },
                    "city": {
                      "type": "string"
                    }
                  }
                },
                "schedule_billing": {
                  "type": "object",
                  "properties": {
                    "stratum": {
                      "type": "integer"
                    },
                    "basic_charge_price": {
                      "type": "float"
                    },
                    "top_limit": {
                      "type": "float"
                    },
                    "basic_price": {
                      "type": "float"
                    },
                    "extra_price": {
                      "type": "float"
                    },
                    "billing_frequency": {
                      "type": "integer"
                    },
                    "billing_period": {
                      "type": "string"
                    },
                    "cut_day": {
                      "type": "integer"
                    },
                    "start_day": {
                      "type": "integer"
                    },
                    "start_month": {
                      "type": "integer"
                    },
                    "start_year": {
                      "type": "integer"
                    }
                  }
                },
                "schedule_report": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string"
                    },
                    "frequency_day": {
                      "type": "integer"
                    },
                    "frequency_interval": {
                      "type": "string"
                    },
                    "start_day": {
                      "type": "integer"
                    },
                    "start_month": {
                      "type": "integer"
                    },
                    "start_year": {
                      "type": "integer"
                    }
                  }
                }
              },
              "required": [
                "new_thing_name",
                "location",
                "country_state_city",
                "schedule_billing",
                "schedule_report"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "location updated",
            "schema": {
              "type": "object",
              "required": [
                "name",
                "address",
                "latitude",
                "longitude",
                "city",
                "schedule_billing",
                "schedule_report"
              ],
              "properties": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "latitude": {
                    "type": "float"
                  },
                  "longitude": {
                    "type": "float"
                  },
                  "city": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_billing": {
                    "type": "object",
                    "properties": {
                      "stratum": {
                        "type": "integer"
                      },
                      "basic_charge_price": {
                        "type": "float"
                      },
                      "top_limit": {
                        "type": "float"
                      },
                      "basic_price": {
                        "type": "float"
                      },
                      "extra_price": {
                        "type": "float"
                      },
                      "billing_frequency": {
                        "type": "integer"
                      },
                      "billing_period": {
                        "type": "string"
                      },
                      "cut_day": {
                        "type": "integer"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_report": {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string"
                      },
                      "frequency_day": {
                        "type": "integer"
                      },
                      "frequency_interval": {
                        "type": "string"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "thing not found",
            "schema": {
              "type": "object",
              "required": [
                "errors"
              ],
              "properties": {
                "type": "object",
                "properties": {
                  "errors": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "get location",
        "tags": [
          "Locations"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "location founded",
            "schema": {
              "type": "object",
              "required": [
                "name",
                "address",
                "latitude",
                "longitude",
                "city",
                "schedule_billing",
                "schedule_report"
              ],
              "properties": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "latitude": {
                    "type": "float"
                  },
                  "longitude": {
                    "type": "float"
                  },
                  "city": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_billing": {
                    "type": "object",
                    "properties": {
                      "stratum": {
                        "type": "integer"
                      },
                      "basic_charge_price": {
                        "type": "float"
                      },
                      "top_limit": {
                        "type": "float"
                      },
                      "basic_price": {
                        "type": "float"
                      },
                      "extra_price": {
                        "type": "float"
                      },
                      "billing_frequency": {
                        "type": "integer"
                      },
                      "billing_period": {
                        "type": "string"
                      },
                      "cut_day": {
                        "type": "integer"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  },
                  "schedule_report": {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string"
                      },
                      "frequency_day": {
                        "type": "integer"
                      },
                      "frequency_interval": {
                        "type": "string"
                      },
                      "start_date": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "404": {
            "description": "location not found"
          }
        }
      }
    },
    "/api/v1/users/{email}/locations": {
      "get": {
        "summary": "get index locations",
        "tags": [
          "Locations"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "email",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "location founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "thing"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "thing": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "new_alarms": {
                        "type": "boolean"
                      },
                      "last_battery_level": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "value": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "level_label": {
                            "type": "string"
                          }
                        }
                      },
                      "valve_transition": {
                        "type": "object",
                        "properties": {
                          "real_state": {
                            "type": "string"
                          },
                          "showed_state": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token is missing"
          },
          "404": {
            "description": "locations not found"
          }
        }
      }
    },
    "/api/v1/states": {
      "get": {
        "summary": "Retrieves all states related with a specific country",
        "tags": [
          "States"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "country_code",
            "in": "query",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "states founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "code_iso": {
                    "type": "string"
                  },
                  "country": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "code_iso": {
                        "type": "string"
                      }
                    }
                  }
                },
                "required": [
                  "name",
                  "code_iso",
                  "country"
                ]
              }
            }
          },
          "404": {
            "description": "country not found",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                }
              },
              "required": [
                "errors"
              ]
            }
          }
        }
      }
    },
    "/api/v1/things": {
      "get": {
        "summary": "Retrieves all Things",
        "tags": [
          "Things"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "type": "string",
            "name": "Authorization",
            "required": true,
            "description": "Client token"
          }
        ],
        "responses": {
          "200": {
            "description": "things founded",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string"
                  },
                  "pac": {
                    "type": "string"
                  },
                  "company_id": {
                    "type": "string"
                  },
                  "latitude": {
                    "type": "float"
                  },
                  "longitude": {
                    "type": "float"
                  },
                  "created_at": {
                    "type": "string"
                  },
                  "updated_at": {
                    "type": "string"
                  }
                },
                "required": [
                  "id",
                  "name",
                  "status",
                  "pac",
                  "company_id",
                  "latitude",
                  "longitude",
                  "created_at",
                  "updated_at"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/things/{thing_name}": {
      "get": {
        "summary": "Retrieves a thing",
        "tags": [
          "Things"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "thing found",
            "schema": {
              "type": "object",
              "required": [
                "id",
                "name",
                "status",
                "pac",
                "company_id",
                "units",
                "latitude",
                "longitude",
                "created_at",
                "updated_at",
                "valve_transition",
                "last_uplink",
                "last_messages"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "status": {
                  "type": "string"
                },
                "pac": {
                  "type": "string"
                },
                "company_id": {
                  "type": "string"
                },
                "units": {
                  "type": "object"
                },
                "latitude": {
                  "type": "float"
                },
                "longitude": {
                  "type": "float"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "valve_transition": {
                  "required": [
                    "real_state",
                    "showed_state"
                  ],
                  "properties": {
                    "real_state": {
                      "type": "string"
                    },
                    "showed_state": {
                      "type": "string"
                    }
                  }
                },
                "last_uplink": {
                  "required": [
                    "created_at",
                    "updated_at",
                    "data",
                    "avgsnr",
                    "rssi",
                    "long",
                    "lat",
                    "snr",
                    "station",
                    "seqnumber",
                    "time",
                    "sec_uplinks",
                    "sec_downlinks"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    },
                    "avgsnr": {
                      "type": "string"
                    },
                    "rssi": {
                      "type": "string"
                    },
                    "long": {
                      "type": "string"
                    },
                    "lat": {
                      "type": "string"
                    },
                    "snr": {
                      "type": "string"
                    },
                    "station": {
                      "type": "string"
                    },
                    "seqnumber": {
                      "type": "string"
                    },
                    "time": {
                      "type": "string"
                    },
                    "sec_uplinks": {
                      "type": "string"
                    },
                    "sec_downlinks": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  }
                },
                "last_messages": {
                  "required": [
                    "accumulator",
                    "alarm",
                    "batteryLevel",
                    "valvePosition",
                    "sensor1",
                    "sensor2",
                    "sensor3",
                    "sensor4",
                    "uplinkBDownlink",
                    "timeUplink"
                  ],
                  "properties": {
                    "accumulator": {
                      "type": "object"
                    },
                    "alarm": {
                      "type": "object"
                    },
                    "batteryLevel": {
                      "type": "object"
                    },
                    "valvePosition": {
                      "type": "object"
                    },
                    "sensor1": {
                      "type": "object"
                    },
                    "sensor2": {
                      "type": "object"
                    },
                    "sensor3": {
                      "type": "object"
                    },
                    "sensor4": {
                      "type": "object"
                    },
                    "uplinkBDownlink": {
                      "type": "object"
                    },
                    "timeUplink": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "thing not found"
          },
          "403": {
            "description": "not authorized to access"
          }
        }
      },
      "put": {
        "summary": "Retrieves an updated thing",
        "tags": [
          "Things"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "thing_name",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "params": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "pac": {
                      "type": "string"
                    },
                    "company_id": {
                      "type": "integer"
                    },
                    "status": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "float"
                    },
                    "longitude": {
                      "type": "float"
                    }
                  }
                }
              },
              "required": [
                "params"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "thing updated",
            "schema": {
              "type": "object",
              "required": [
                "id",
                "name",
                "status",
                "pac",
                "company_id",
                "units",
                "latitude",
                "longitude",
                "created_at",
                "updated_at",
                "valve_transition",
                "last_uplink",
                "last_messages"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "status": {
                  "type": "string"
                },
                "pac": {
                  "type": "string"
                },
                "company_id": {
                  "type": "string"
                },
                "units": {
                  "type": "object"
                },
                "latitude": {
                  "type": "float"
                },
                "longitude": {
                  "type": "float"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "valve_transition": {
                  "required": [
                    "real_state",
                    "showed_state"
                  ],
                  "properties": {
                    "real_state": {
                      "type": "string"
                    },
                    "showed_state": {
                      "type": "string"
                    }
                  }
                },
                "last_uplink": {
                  "required": [
                    "created_at",
                    "updated_at",
                    "data",
                    "avgsnr",
                    "rssi",
                    "long",
                    "lat",
                    "snr",
                    "station",
                    "seqnumber",
                    "time",
                    "sec_uplinks",
                    "sec_downlinks"
                  ],
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    },
                    "avgsnr": {
                      "type": "string"
                    },
                    "rssi": {
                      "type": "string"
                    },
                    "long": {
                      "type": "string"
                    },
                    "lat": {
                      "type": "string"
                    },
                    "snr": {
                      "type": "string"
                    },
                    "station": {
                      "type": "string"
                    },
                    "seqnumber": {
                      "type": "string"
                    },
                    "time": {
                      "type": "string"
                    },
                    "sec_uplinks": {
                      "type": "string"
                    },
                    "sec_downlinks": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  }
                },
                "last_messages": {
                  "required": [
                    "accumulator",
                    "alarm",
                    "batteryLevel",
                    "valvePosition",
                    "sensor1",
                    "sensor2",
                    "sensor3",
                    "sensor4",
                    "uplinkBDownlink",
                    "timeUplink"
                  ],
                  "properties": {
                    "accumulator": {
                      "type": "object"
                    },
                    "alarm": {
                      "type": "object"
                    },
                    "batteryLevel": {
                      "type": "object"
                    },
                    "valvePosition": {
                      "type": "object"
                    },
                    "sensor1": {
                      "type": "object"
                    },
                    "sensor2": {
                      "type": "object"
                    },
                    "sensor3": {
                      "type": "object"
                    },
                    "sensor4": {
                      "type": "object"
                    },
                    "uplinkBDownlink": {
                      "type": "object"
                    },
                    "timeUplink": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "thing not found"
          },
          "403": {
            "description": "not authorized to access"
          }
        }
      }
    },
    "/api/v1/uplinks": {
      "get": {
        "summary": "Retrieves all Uplinks",
        "tags": [
          "Uplinks"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "header",
            "type": "string",
            "name": "Authorization",
            "required": true,
            "description": "Client token"
          }
        ],
        "responses": {
          "200": {
            "description": "last uplink found",
            "schema": {
              "type": "object",
              "required": [
                "created_at",
                "updated_at",
                "data",
                "avgsnr",
                "rssi",
                "long",
                "lat",
                "snr",
                "station",
                "seqnumber",
                "time",
                "sec_uplinks",
                "sec_downlinks"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "data": {
                  "type": "string"
                },
                "avgsnr": {
                  "type": "string"
                },
                "rssi": {
                  "type": "string"
                },
                "long": {
                  "type": "string"
                },
                "lat": {
                  "type": "string"
                },
                "snr": {
                  "type": "string"
                },
                "station": {
                  "type": "string"
                },
                "seqnumber": {
                  "type": "string"
                },
                "time": {
                  "type": "string"
                },
                "sec_uplinks": {
                  "type": "string"
                },
                "sec_downlinks": {
                  "type": "string"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "no uplinks found"
          }
        }
      }
    },
    "/api/v1/users/{email}": {
      "get": {
        "summary": "Retrieves a User",
        "tags": [
          "Users"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "email",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "user found",
            "schema": {
              "type": "object",
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              },
              "required": [
                "first_name",
                "last_name",
                "email"
              ]
            }
          },
          "404": {
            "description": "user not found"
          }
        }
      },
      "put": {
        "summary": "update user",
        "tags": [
          "Users"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "email",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "new_email": {
                  "type": "string"
                },
                "country_code": {
                  "type": "string"
                },
                "current_password": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "password_confirmation": {
                  "type": "string"
                }
              },
              "required": [
                "first_name",
                "last_name",
                "new_email",
                "country_code",
                "current_password",
                "password",
                "password_confirmation"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "user created",
            "schema": {
              "type": "object",
              "required": [
                "first_name",
                "last_name",
                "email"
              ],
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "user not found"
          }
        }
      }
    },
    "/confirm_email": {
      "post": {
        "summary": "Retrieves a confirmation to the confirm email process",
        "tags": [
          "Users"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string"
                },
                "token": {
                  "type": "string"
                }
              },
              "required": [
                "email",
                "token"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "user found with verification_code",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          },
          "404": {
            "description": "user not found or verification_code expired or fake",
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "string"
                }
              },
              "required": [
                "errors"
              ]
            }
          }
        }
      }
    },
    "/request_password_recovery": {
      "post": {
        "summary": "Retrieves a success response with recovery password email sended",
        "tags": [
          "Users"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string"
                }
              },
              "required": [
                "email"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "user found with email",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          },
          "404": {
            "description": "user not found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "summary": "index users",
        "tags": [
          "Users"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "email",
            "in": "path",
            "type": "string",
            "required": true
          },
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "user found",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "first_name": {
                    "type": "string"
                  },
                  "last_name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  }
                },
                "required": [
                  "first_name",
                  "last_name",
                  "email"
                ]
              }
            }
          }
        }
      },
      "post": {
        "summary": "create user",
        "tags": [
          "Users"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "country_code": {
                  "type": "string"
                },
                "phone": {
                  "type": "string"
                },
                "gender": {
                  "type": "string"
                },
                "id_number": {
                  "type": "string"
                },
                "id_type": {
                  "type": "string"
                },
                "code_number": {
                  "type": "string"
                }
              },
              "required": [
                "first_name",
                "last_name",
                "email",
                "password",
                "phone",
                "gender",
                "id_number",
                "id_type",
                "code_number"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "user created",
            "schema": {
              "type": "object",
              "required": [
                "first_name",
                "last_name",
                "email"
              ],
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/change_forgotten_password": {
      "put": {
        "summary": "update password user",
        "tags": [
          "Users"
        ],
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "input",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string"
                },
                "current_password": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                },
                "password_confirmation": {
                  "type": "string"
                }
              },
              "required": [
                "email",
                "current_password",
                "password",
                "password_confirmation"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "user password updated",
            "schema": {
              "type": "object",
              "required": [
                "first_name",
                "last_name",
                "email"
              ],
              "properties": {
                "first_name": {
                  "type": "string"
                },
                "last_name": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "user not found"
          }
        }
      }
    }
  }
}